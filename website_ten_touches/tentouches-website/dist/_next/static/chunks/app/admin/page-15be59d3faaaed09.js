(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1305:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(5155),r=s(2115),i=s(7896),n=s(9698);function l(){let[e,t]=(0,r.useState)([]),[s,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1),[u,p]=(0,r.useState)(""),[w,b]=(0,r.useState)(!1),[g,j]=(0,r.useState)(null),f=(0,r.useCallback)(async(e,s=!1)=>{l(!0),c("");try{let a=new AbortController,r=setTimeout(()=>a.abort(),8e3),i=`/.netlify/functions/admin-signups${s?"?archived=true":""}`,n=await fetch(i,{headers:{"X-Admin-Password":e},signal:a.signal});if(clearTimeout(r),401===n.status){c("Invalid password"),m(!1);return}if(!n.ok)throw Error(`Server error: ${n.status}`);let l=await n.json();t(l.signups),m(!0)}catch(e){e instanceof Error&&"AbortError"===e.name?c("Request timed out. Please try again."):c(e instanceof Error?e.message:"Something went wrong")}finally{l(!1)}},[]);async function v(e){e.preventDefault(),!s&&d&&await f(d,w)}async function y(e){if(confirm("Are you sure you want to archive this signup? It will be moved to the archive.")){j(e),c("");try{let s=new AbortController,a=setTimeout(()=>s.abort(),8e3),r=await fetch("/.netlify/functions/admin-signups",{method:"DELETE",headers:{"Content-Type":"application/json","X-Admin-Password":d},body:JSON.stringify({key:e}),signal:s.signal});if(clearTimeout(a),!r.ok){let e=await r.json().catch(()=>({error:"Unknown error"}));throw Error(e.error||"Failed to archive")}t(t=>t.filter(t=>t.key!==e))}catch(e){e instanceof Error&&"AbortError"===e.name?c("Delete request timed out."):c(e instanceof Error?e.message:"Failed to archive signup")}finally{j(null)}}}let N=e.filter(e=>e.name.toLowerCase().includes(u.toLowerCase())||e.email.toLowerCase().includes(u.toLowerCase())),k={total:e.length,withMobile:e.filter(e=>e.mobile).length,thisWeek:e.filter(e=>{let t=new Date(e.timestamp),s=new Date;return s.setDate(s.getDate()-7),t>s}).length};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Header,{}),(0,a.jsxs)("main",{className:"min-h-screen bg-tt-navy pt-24 pb-12",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-gradient-to-b from-tt-navy via-tt-slate/40 to-tt-navy -z-10"}),(0,a.jsx)("div",{className:"gradient-orb w-[500px] h-[500px] bg-tt-cyan/15 -top-32 left-1/3"}),(0,a.jsx)("div",{className:"gradient-orb w-[400px] h-[400px] bg-tt-indigo/15 -bottom-32 right-1/4"}),(0,a.jsx)("div",{className:"max-w-6xl mx-auto px-6",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:w?(0,a.jsxs)(a.Fragment,{children:["Archived ",(0,a.jsx)("span",{className:"gradient-text",children:"Signups"})]}):(0,a.jsxs)(a.Fragment,{children:["Beta ",(0,a.jsx)("span",{className:"gradient-text",children:"Signups"})]})}),(0,a.jsx)("p",{className:"text-white/50",children:w?"View and manage archived signups.":"Manage and export your early access list."})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,a.jsxs)("button",{onClick:function(){let e=!w;b(e),x&&f(d,e)},className:`inline-flex items-center justify-center gap-2 rounded-full px-6 py-3 text-sm font-medium transition-all ${w?"bg-tt-cyan/20 text-tt-cyan border border-tt-cyan/30":"border border-white/10 bg-white/5 text-white/80 hover:bg-white/10"}`,children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),w?"View Active":"View Archive"]}),(0,a.jsxs)("button",{onClick:function(){let t=w?["Name","Email","Mobile","Date","Archived Date"]:["Name","Email","Mobile","Date"],s=e.map(e=>{let t=[e.name,e.email,e.mobile||"",new Date(e.timestamp).toLocaleString("en-GB")];return w&&t.push(e.archivedAt?new Date(e.archivedAt).toLocaleString("en-GB"):""),t}),a=new Blob([[t.join(","),...s.map(e=>e.map(e=>`"${String(e).replace(/"/g,'""')}"`).join(","))].join("\n")],{type:"text/csv"}),r=URL.createObjectURL(a),i=document.createElement("a");i.href=r;let n=w?"-archived":"";i.download=`tentouches-signups${n}-${new Date().toISOString().split("T")[0]}.csv`,i.click(),URL.revokeObjectURL(r)},className:"inline-flex items-center justify-center gap-2 rounded-full border border-white/10 bg-white/5 px-6 py-3 text-sm font-medium text-white/80 transition-all hover:bg-white/10 hover:text-white",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export CSV"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"glass-card p-6 rounded-xl",children:[(0,a.jsx)("p",{className:"text-sm text-white/50 mb-1",children:"Total Signups"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-white",children:k.total})]}),(0,a.jsxs)("div",{className:"glass-card p-6 rounded-xl",children:[(0,a.jsx)("p",{className:"text-sm text-white/50 mb-1",children:"With Mobile"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-tt-cyan",children:k.withMobile})]}),(0,a.jsxs)("div",{className:"glass-card p-6 rounded-xl",children:[(0,a.jsx)("p",{className:"text-sm text-white/50 mb-1",children:"This Week"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-tt-success",children:k.thisWeek})]})]}),(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"Search by name or email...",className:"w-full md:w-96 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder:text-white/25 outline-none focus:border-tt-cyan/50 focus:ring-1 focus:ring-tt-cyan/30 transition-colors"})}),o&&(0,a.jsx)("div",{className:"mb-6 p-4 rounded-xl bg-tt-error/10 border border-tt-error/20",children:(0,a.jsx)("p",{className:"text-sm text-tt-error",children:o})}),s?(0,a.jsxs)("div",{className:"glass-card p-12 rounded-2xl text-center",children:[(0,a.jsx)("div",{className:"animate-spin w-8 h-8 border-2 border-tt-cyan border-t-transparent rounded-full mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-white/50",children:"Loading signups..."})]}):0===N.length?(0,a.jsx)("div",{className:"glass-card p-12 rounded-2xl text-center",children:(0,a.jsx)("p",{className:"text-white/50",children:u?"No signups match your search.":w?"No archived signups.":"No signups yet."})}):(0,a.jsx)("div",{className:"glass-card rounded-2xl overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-white/10",children:[(0,a.jsx)("th",{className:"text-left text-sm font-medium text-white/50 px-6 py-4",children:"Name"}),(0,a.jsx)("th",{className:"text-left text-sm font-medium text-white/50 px-6 py-4",children:"Email"}),(0,a.jsx)("th",{className:"text-left text-sm font-medium text-white/50 px-6 py-4",children:"Mobile"}),(0,a.jsx)("th",{className:"text-left text-sm font-medium text-white/50 px-6 py-4",children:"Date"}),w&&(0,a.jsx)("th",{className:"text-left text-sm font-medium text-white/50 px-6 py-4",children:"Archived"}),!w&&(0,a.jsx)("th",{className:"text-right text-sm font-medium text-white/50 px-6 py-4",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:N.map(e=>(0,a.jsxs)("tr",{className:"border-b border-white/5 hover:bg-white/5 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-white font-medium",children:e.name}),(0,a.jsx)("td",{className:"px-6 py-4 text-white/70",children:(0,a.jsx)("a",{href:`mailto:${e.email}`,className:"hover:text-tt-cyan transition-colors",children:e.email})}),(0,a.jsx)("td",{className:"px-6 py-4 text-white/70",children:e.mobile?(0,a.jsx)("a",{href:`tel:${e.mobile}`,className:"hover:text-tt-cyan transition-colors",children:e.mobile}):(0,a.jsx)("span",{className:"text-white/30",children:"—"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-white/50 text-sm",children:new Date(e.timestamp).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})}),w&&(0,a.jsx)("td",{className:"px-6 py-4 text-white/50 text-sm",children:e.archivedAt?new Date(e.archivedAt).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}):"—"}),!w&&(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)("button",{onClick:()=>y(e.key),disabled:g===e.key,className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm text-white/60 hover:text-tt-error transition-colors rounded-lg hover:bg-tt-error/10",title:"Archive this signup",children:[g===e.key?(0,a.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),g===e.key?"Archiving...":"Archive"]})})]},e.key))})]})})})]}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,a.jsxs)("div",{className:"glass-card p-8 rounded-2xl w-full max-w-md",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"w-14 h-14 rounded-full bg-tt-cyan/15 flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("svg",{className:"w-7 h-7 text-tt-cyan",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-white mb-2",children:"Admin Access"}),(0,a.jsx)("p",{className:"text-sm text-white/50",children:"Enter the admin password to view beta signups."})]}),(0,a.jsxs)("form",{onSubmit:v,className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"admin-password",className:"block text-sm font-medium text-white/70 mb-2",children:"Password"}),(0,a.jsx)("input",{id:"admin-password",type:"password",value:d,onChange:e=>h(e.target.value),placeholder:"Enter admin password",disabled:s,className:"w-full rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-white placeholder:text-white/25 outline-none focus:border-tt-cyan/50 focus:ring-1 focus:ring-tt-cyan/30 transition-colors disabled:opacity-50"})]}),o&&(0,a.jsx)("p",{className:"text-sm text-tt-error text-center",children:o}),(0,a.jsx)("button",{type:"submit",disabled:s||!d,className:"w-full rounded-full bg-gradient-to-r from-tt-cyan to-tt-indigo px-8 py-4 text-base font-semibold text-white shadow-lg shadow-tt-cyan/25 transition-all hover:shadow-xl hover:shadow-tt-cyan/35 hover:scale-[1.02] active:scale-[0.98] disabled:opacity-60 disabled:pointer-events-none",children:s?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,a.jsxs)("svg",{className:"animate-spin h-5 w-5",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Access Dashboard"})]})]})})})]}),(0,a.jsx)(n.w,{})]})}},7990:(e,t,s)=>{Promise.resolve().then(s.bind(s,1305))}},e=>{e.O(0,[94,999,441,826,358],()=>e(e.s=7990)),_N_E=e.O()}]);